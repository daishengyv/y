<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>canvas互动星空</title><style>.filter,.landscape{position:absolute;left:0}.filter,.landscape,body,html{width:100%;height:100%}body,html{margin:0;overflow:hidden;cursor:none;background:#000;background:linear-gradient(to bottom,#000 0,#5788fe 100%)}.filter{top:0;background:#fe5757;animation:colorChange 30s ease-in-out infinite;animation-fill-mode:both;mix-blend-mode:overlay}@keyframes colorChange{0%,100%{opacity:0}50%{opacity:.9}}.landscape{bottom:0}</style></head><body><div class="landscape"></div><div class="filter"></div><canvas id="canvas" width="1366" height="555"></canvas><script>function Star(t,o,i){this.id=t,this.x=o,this.y=i,this.r=Math.floor(2*Math.random())+1;var s=(Math.floor(10*Math.random())+1)/10/2;this.color="rgba(255,255,255,"+s+")"}function Dot(t,o,i,s){this.id=t,this.x=o,this.y=i,this.r=Math.floor(5*Math.random())+1,this.maxLinks=2,this.speed=.5,this.a=.5,this.aReduction=.005,this.color="rgba(255,255,255,"+this.a+")",this.linkColor="rgba(255,255,255,"+this.a/4+")",this.dir=Math.floor(140*Math.random())+200}function getPreviousDot(t,o){return!(0==t||t-o<0)&&("undefined"!=typeof dots[t-o]&&dots[t-o])}function setCanvasSize(){WIDTH=document.documentElement.clientWidth,HEIGHT=document.documentElement.clientHeight,canvas.setAttribute("width",WIDTH),canvas.setAttribute("height",HEIGHT)}function init(){ctx.strokeStyle="white",ctx.shadowColor="white";for(var t=0;t<initStarsPopulation;t++)stars[t]=new Star(t,Math.floor(Math.random()*WIDTH),Math.floor(Math.random()*HEIGHT));ctx.shadowBlur=0,animate()}function animate(){ctx.clearRect(0,0,WIDTH,HEIGHT);for(var t in stars)stars[t].move();for(var t in dots)dots[t].move();drawIfMouseMoving(),requestAnimationFrame(animate)}function drawIfMouseMoving(){if(mouseMoving){if(0==dots.length)return dots[0]=new Dot(0,mouseX,mouseY),void dots[0].draw();var t=getPreviousDot(dots.length,1),o=t.x,i=t.y,s=Math.abs(o-mouseX),e=Math.abs(i-mouseY);if(!(s<dotsMinDist||e<dotsMinDist)){var a=Math.random()>.5?-1:1;a=a*Math.floor(Math.random()*maxDistFromCursor)+1;var n=Math.random()>.5?-1:1;n=n*Math.floor(Math.random()*maxDistFromCursor)+1,dots[dots.length]=new Dot(dots.length,mouseX+a,mouseY+n),dots[dots.length-1].draw(),dots[dots.length-1].link()}}}function degToRad(t){return t*(Math.PI/180)}Star.prototype.draw=function(){ctx.fillStyle=this.color,ctx.shadowBlur=2*this.r,ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),ctx.closePath(),ctx.fill()},Star.prototype.move=function(){this.y-=.15,this.y<=-10&&(this.y=HEIGHT+10),this.draw()},Star.prototype.die=function(){stars[this.id]=null,delete stars[this.id]},Dot.prototype.draw=function(){ctx.fillStyle=this.color,ctx.shadowBlur=2*this.r,ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),ctx.closePath(),ctx.fill()},Dot.prototype.link=function(){if(0!=this.id){var t=getPreviousDot(this.id,1),o=getPreviousDot(this.id,2),i=getPreviousDot(this.id,3);t&&(ctx.strokeStyle=this.linkColor,ctx.moveTo(t.x,t.y),ctx.beginPath(),ctx.lineTo(this.x,this.y),0!=o&&ctx.lineTo(o.x,o.y),0!=i&&ctx.lineTo(i.x,i.y),ctx.stroke(),ctx.closePath())}},Dot.prototype.move=function(){return this.a-=this.aReduction,this.a<=0?void this.die():(this.color="rgba(255,255,255,"+this.a+")",this.linkColor="rgba(255,255,255,"+this.a/4+")",this.x=this.x+Math.cos(degToRad(this.dir))*this.speed,this.y=this.y+Math.sin(degToRad(this.dir))*this.speed,this.draw(),void this.link())},Dot.prototype.die=function(){dots[this.id]=null,delete dots[this.id]};var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),WIDTH,HEIGHT,mouseMoving=!1,mouseMoveChecker,mouseX,mouseY,stars=[],initStarsPopulation=80,dots=[],dotsMinDist=2,maxDistFromCursor=50;setCanvasSize(),init(),window.onmousemove=function(t){mouseMoving=!0,mouseX=t.clientX,mouseY=t.clientY,clearInterval(mouseMoveChecker),mouseMoveChecker=setTimeout(function(){mouseMoving=!1},100)}</script></body></html>